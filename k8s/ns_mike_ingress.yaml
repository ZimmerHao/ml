---
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: traefik-ingress-controller-mike-ingress-auth
  namespace: ns-mike
  annotations:
    kubernetes.io/ingress.class: traefik
    traefik.ingress.kubernetes.io/frontend-entry-points: https,http
    traefik.ingress.kubernetes.io/redirect-entry-point: https
    traefik.ingress.kubernetes.io/redirect-permanent: "true"
    ingress.kubernetes.io/auth-type: forward
    ingress.kubernetes.io/auth-url: http://webapp.default.svc.cluster.local:5000/hi/auth
    ingress.kubernetes.io/auth-sigin: https://console.deepvega.com/hi/login
    ingress.kubernetes.io/auth-response-headers: X-Auth-User, X-Secret
spec:
  rules:
  - host: mike.zeppelin.deepvega.com
    http:
      paths:
        - path: /
          backend:
            serviceName: spark-mike-zeppelin
            servicePort: 8080
  - host: mike.spark-ui.deepvega.com
    http:
      paths:
        - path: /
          backend:
            serviceName: spark-mike-master
            servicePort: 8080
